<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>Movie Recommender ‚Äî Title + Genre Search</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 min-h-screen p-6">
  <div class="max-w-6xl mx-auto">

    <h1 class="text-3xl font-bold mb-4 text-center">üé¨ Movie Recommender</h1>

    <form method="POST" class="mb-6 max-w-2xl mx-auto">
      <input list="titles" name="movie" placeholder="Type a movie title or a keyword (e.g., 'horror', 'action', 'zombie')"
             value="{{ query }}" class="w-full p-3 border rounded" required>
      <datalist id="titles">
        {% for t in titles %}
          <option value="{{ t }}"></option>
        {% endfor %}
      </datalist>
      <button class="mt-3 px-4 py-2 bg-blue-600 text-white rounded">Search</button>
    </form>

    {% if query and not results %}
      <div class="p-4 bg-yellow-100 border-l-4 border-yellow-400 mb-6">
        <strong>No results found</strong> for "<em>{{ query }}</em>" ‚Äî try a different keyword or pick a title from suggestions.
      </div>
    {% endif %}

    {% if used_title %}
      <div class="p-3 bg-blue-50 border-l-4 border-blue-400 mb-4 max-w-2xl mx-auto text-center">
        Showing movies similar to: <strong>{{ used_title }}</strong>
      </div>
    {% elif query %}
      <div class="p-3 bg-green-50 border-l-4 border-green-400 mb-4 max-w-2xl mx-auto text-center">
        Showing results for keyword: <strong>{{ query }}</strong>
      </div>
    {% endif %}

    {% if results %}
      <div class="grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-6">
        {% for r in results %}
          <div class="bg-white p-3 rounded shadow hover:shadow-lg transition">
            {% if r.poster_url %}
              <a href="{{ r.tmdb_link }}" target="_blank" rel="noopener noreferrer">
                <img src="{{ r.poster_url }}" alt="{{ r.title }}" class="w-full h-auto rounded mb-2">
              </a>
            {% else %}
              <div class="h-44 bg-gray-200 mb-2 rounded flex items-center justify-center">
                <span class="text-gray-500 text-sm">No Image</span>
              </div>
            {% endif %}

            <div class="text-sm font-semibold text-center">{{ r.title }}
              {% if r.year %}<span class="text-gray-500 font-normal"> ({{ r.year }})</span>{% endif %}
            </div>

            <div class="text-xs text-gray-600 mt-1 text-center">
              {% if r.rating %}‚≠ê {{ r.rating }}{% endif %}
            </div>

            {% if r.overview %}
            <p class="mt-2 text-xs text-gray-700" style="line-height:1.15;">{{ r.overview }}</p>
            {% endif %}
          </div>
        {% endfor %}
      </div>
    {% endif %}

  </div>
</body>
</html>
